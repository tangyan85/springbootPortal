<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="section/header :: head"></head>
<link rel="stylesheet" th:href="@{/assets/css/ace.min.css}"/>
<script th:src="@{/assets/js/wizard.min.js}"></script>
<script th:src="@{/assets/js/jquery.validate.min.js}"></script>
<script th:src="@{/assets/js/jquery.maskedinput.min.js}"></script>
<script th:src="@{/assets/js/ace-elements.min.js}"></script>
<script th:src="@{/assets/js/ace.min.js}"></script>

<body style="background: #ffffff">
<div th:fragment="dashboard">
    <section class="content-header">
        <h1>
            新建项目
            <small>preview</small>
        </h1>
        <ol class="breadcrumb" style="margin:0px;">
            <li><a href="#"><i class="fa fa-dashboard"></i> 主页</a></li>
            <li><a href="#">项目管理</a></li>
            <li class="active">新建项目</li>
        </ol>
    </section>

    <section class="content">
        <form class="form-horizontal">
            <div class="row">
                <div class="col-xs-12">
                    <div class="widget-box">
                        <div class="widget-header widget-header-blue widget-header-flat">
                            <h4 class="widget-title lighter">
                                <i class="ace-icon fa fa-hand-o-right icon-animated-hand-pointer blue">创建向导</i>
                            </h4>
                        </div>

                        <div class="widget-body">
                            <div class="widget-main">
                                <div id="fuelux-wizard-container" class="no-steps-container">
                                    <div>
                                        <ul class="steps" style="margin-left: 0">
                                            <li data-step="1" class="active">
                                                <span class="step"><i class="glyphicon glyphicon-tree-conifer"
                                                                      style="top:3px;color:#3c763d;"></i></span>
                                                <span class="title">项目详情</span>
                                            </li>

                                            <li data-step="2">
                                                <span class="step"><i class="glyphicon glyphicon-user"
                                                                      style="top:3px;color:#0897ea;"></i></span>
                                                <span class="title">项目团队</span>
                                            </li>

                                            <li data-step="3">
                                                <span class="step"><i class="glyphicon glyphicon-tasks"
                                                                      style="top:3px;color:#f44336;"></i></span>
                                                <span class="title">任务跟踪</span>
                                            </li>

                                            <li data-step="4">
                                                <span class="step"><i class="glyphicon glyphicon-leaf"
                                                                      style="top:3px;color:#63ba3c;"></i></span>
                                                <span class="title">文档协同</span>
                                            </li>
                                            <li data-step="5">
                                                <span class="step"><i class="glyphicon glyphicon-list-alt"
                                                                      style="top:3px;color:#cd8b51;"></i></span>
                                                <span class="title">源代码管理</span>
                                            </li>
                                            <li data-step="6">
                                                <span class="step"><i class="glyphicon glyphicon-duplicate"
                                                                      style="top:3px;color:#c33625;"></i></span>
                                                <span class="title">持续集成</span>
                                            </li>
                                            <li data-step="7">
                                                <span class="step"><i class="glyphicon glyphicon-grain"
                                                                      style="top:3px;color:#f5db53;"></i></span>
                                                <span class="title">产出物管理</span>
                                            </li>
                                        </ul>
                                    </div>

                                    <hr>

                                    <div class="step-content pos-rel">
                                        <div class="step-pane active" data-step="1">
                                            <h3 class="lighter block green">填写下列信息</h3>

                                            <div class="form-group">
                                                <label for="projectKey"
                                                       class="col-xs-12 col-sm-3 control-label no-padding-right">项目英文简称</label>

                                                <div class="col-xs-12 col-sm-5">
												<span class="block input-icon input-icon-right">
                                                    <input id="projectKey" name="projectKey" class="width-100"
                                                           type="text" onkeyup="this.value=this.value.toUpperCase()">
                                                    <i class="ace-icon fa fa-info-circle"></i>
												</span>
                                                </div>
                                                <div class="help-block col-xs-12 col-sm-reset inline"
                                                     style="position:absolute;z-index:20;">
                                                    <ul id="projectKey_tips" style="display:none;">
                                                        <li>长度为2~16个字符</li>
                                                        <li>支持字母和-_</li>
                                                        <li>不允许有空格</li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="projectName"
                                                       class="col-xs-12 col-sm-3 control-label no-padding-right">项目名称</label>

                                                <div class="col-xs-12 col-sm-5">
                                                    <span class="block input-icon input-icon-right">
                                                        <input id="projectName" name="projectName" class="width-100"
                                                               type="text" required="required">
                                                        <i class="ace-icon fa fa-info-circle"></i>
                                                    </span>
                                                </div>
                                                <div class="help-block col-xs-12 col-sm-reset inline"
                                                     style="position:absolute;z-index:20;">
                                                    <ul id="projectName_tips" style="display:none;">
                                                        <li>长度为2~25个字符</li>
                                                        <li>支持汉字，大小写字母和数字</li>
                                                        <li>不允许有空格和特殊符号</li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="status"
                                                       class="col-xs-12 col-sm-3 control-label no-padding-right">项目状态</label>

                                                <div class="col-xs-12 col-sm-5">
												<span class="block input-icon input-icon-right">
                                                    <select id="status" name="status" class="width-100" disabled>
                                                        <option th:each="status : ${projectStatus}"
                                                                th:value="${status.key}"
                                                                th:text="${status.value}"
                                                                th:selected="${status.key=='START'}"/>
                                                    </select>
												</span>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="projectName"
                                                       class="col-xs-12 col-sm-3 control-label no-padding-right">优先级</label>

                                                <div class="col-xs-12 col-sm-5">
												<span class="block input-icon input-icon-right">
                                                    <input id="rank" name="rank" type="number" class="width-100"
                                                           value="1" min="0" max="10" required="required"/>
                                                    <i class="ace-icon fa fa-info-circle"></i>
												</span>
                                                </div>
                                                <div class="help-block col-xs-12 col-sm-reset inline"
                                                     style="position:absolute;z-index:20;">
                                                    <ul id="rank_tips" style="display:none;">
                                                        <li>数字越大优先级越高</li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="projectName"
                                                       class="col-xs-12 col-sm-3 control-label no-padding-right">项目描述</label>

                                                <div class="col-xs-12 col-sm-5">
												<span class="block input-icon input-icon-right">
                                                    <textarea id="description" name="description" class="width-100"
                                                              rows="3"></textarea>
                                                    <i class="ace-icon fa fa-info-circle"></i>
												</span>
                                                </div>
                                                <div class="help-block col-xs-12 col-sm-reset inline"
                                                     style="position:absolute;z-index:20;">
                                                    <ul id="description_tips" style="display:none;">
                                                        <li>长度为0~200个字符</li>
                                                    </ul>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="step-pane" data-step="2">
                                            <h3 class="lighter block green">填写下列信息</h3>

                                            <table id="table12">
                                                <tr>
                                                    <td data-editable="name">Danish</td>
                                                    <td data-editable="phone">923125511678</td>
                                                    <td data-editable="age" data-editable-type="number">30</td>
                                                    <td><!-- Extra column for buttons--></td>
                                                </tr>
                                            </table>
                                        </div>

                                        <div class="step-pane" data-step="3">
                                            <h3 class="lighter block green">填写下列信息</h3>

                                            <div class="row mar_ned">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>操作类型</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <select class="dropselectsec actionJira" id="inputActionType"
                                                            name="inputActionType">
                                                        <option value="-1">------请选择------</option>
                                                        <option th:each="optype : ${inputActionTypes}"
                                                                th:value="${optype.key}" th:text="${optype.value}"
                                                                th:remove="${#strings.equalsIgnoreCase(optype.key, 'UPDATE_OR_NOTHING')}? all"
                                                        />
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row mar_ned">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>服务器地址</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <select class="dropselectsec" id="serverId" name="serverId">
                                                        <option th:each="ip : ${serverIPs}" th:value="${ip.serverId}"
                                                                th:text="${ip.outerServerIpAndPort}"
                                                                th:remove="${#strings.equalsIgnoreCase(ip.serverType, 'jira')}? none:all"
                                                        />
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row mar_ned">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>请选择模板</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <select class="dropselectsec selectJira" id="selectJira"
                                                            name="selectJira" data-ingore="true">
                                                        <option value="-1">------请选择------</option>
                                                        <option th:each="jira : ${existJiras}"
                                                                th:value="${jira.referJiraId}"
                                                                th:text="${jira.jiraProjectName}"/>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row mar_ned" style="display:none">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>jiraProjectId</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <input class="dropselectsec selectChange" type="text"
                                                           name="jiraProjectId" id="jiraProjectId"
                                                           th:value="*{jiraProjectId}"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row mar_ned" style="display:none">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>referJiraId</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <input class="dropselectsec selectChange" type="text"
                                                           name="referJiraId"
                                                           id="referJiraId" th:value="*{referJiraId}"/>
                                                </div>
                                            </div>
                                            <div class="row mar_ned" style="display:none">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>teamleader</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <input class="dropselectsec selectChange" type="text"
                                                           name="teamleader"
                                                           id="teamleader" th:value="*{teamleader}"/>
                                                </div>
                                            </div>
                                            <div class="row mar_ned">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>Jira项目英文简称</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <input class="dropselectsec selectChange" type="text"
                                                           name="jiraProjectKey" id="jiraProjectKey" disabled/>
                                                </div>
                                            </div>
                                            <div class="row mar_ned">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>Jira项目名称</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <input class="dropselectsec selectChange" type="text"
                                                           name="jiraProjectName" id="jiraProjectName"
                                                           required="required"
                                                           disabled/>
                                                </div>
                                            </div>
                                            <div class="row mar_ned">
                                                <div class="col-md-4 col-xs-3">
                                                    <p align="right">
                                                        <stong>描述</stong>
                                                    </p>
                                                </div>
                                                <div class="col-md-8 col-xs-9">
                                                    <input class="dropselectsec selectChange" type="text"
                                                           name="jiraProjectDescription" id="jiraProjectDescription"/>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="step-pane" data-step="4">
                                            <h3 class="lighter block green">填写下列信息</h3>

                                            <div class="row mar_ned">
                                                <table class="table table-bordered " id="confluenceSpaceTable"
                                                       data-target="confluenceSpaces">
                                                    <thead>
                                                    <tr>

                                                        <th id="inputActionType">操作类型</th>
                                                        <th id="serverId">服务器地址</th>
                                                        <th data-ingore="true">请选择模板</th>
                                                        <th id="spaceId" style="display:none">spaceId</th>
                                                        <th id="spaceKey">Confluence空间英文简称</th>
                                                        <th id="spaceName">Confluence空间名称</th>
                                                        <th id="spaceDescription">描述</th>
                                                        <th id="pageId" style="display:none">pageId</th>
                                                        <th data-ingore="true">操作</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list-item_copy">
                                                    <tr data-ingore-target="spaceKey">
                                                        <td>
                                                            <select class="form-control actionConfluence"
                                                                    id="inputActionType" name="inputActionType">
                                                                <option value="-1">------请选择------</option>
                                                                <option th:each="optype : ${inputActionTypes}"
                                                                        th:value="${optype.key}"
                                                                        th:text="${optype.value}"
                                                                        th:remove="${#strings.equalsIgnoreCase(optype.key, 'UPDATE_OR_NOTHING')}? all"
                                                                />
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" id="serverId" name="serverId">
                                                                <option th:each="ip : ${serverIPs}"
                                                                        th:value="${ip.serverId}"
                                                                        th:text="${ip.outerServerIpAndPort}"
                                                                        th:remove="${#strings.equalsIgnoreCase(ip.serverType, 'CONFLUENCE')}? none:all"
                                                                />
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control selectConfluence" id="conf"
                                                                    name="conf" data-ingore="true">
                                                                <option value="-1">------请选择------</option>
                                                                <option th:each="conf : ${existConfs}"
                                                                        th:value="${conf.spaceKey}"
                                                                        th:text="${conf.spaceName}"/>
                                                            </select>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="hidden"
                                                                   name="spaceId" id="spaceId" th:value="*{spaceId}"/>
                                                        </td>
                                                        <td>
                                                            <input class="form-control selectChange" type="text"
                                                                   name="spaceKey" id="spaceKey" disabled/>
                                                        </td>
                                                        <td>
                                                            <input class="form-control selectChange" type="text"
                                                                   name="spaceName" id="spaceName" disabled/>
                                                        </td>
                                                        <td>
                                                            <input class="form-control" type="text"
                                                                   name="spaceDescription"
                                                                   id="spaceDescription"/>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="text"
                                                                   name="pageId" id="pageId" disabled/>
                                                        </td>
                                                        <td>
                                                            <a href="#" class="del">
                                                            <span class="glyphicon glyphicon-remove" aria-hidden="true"
                                                                  title="删除"></span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <div class="step-pane" data-step="5">
                                            <h3 class="lighter block green">填写下列信息</h3>

                                            <div class="row mar_ned">
                                                <table class="table table-bordered " id="sCMRepoTable"
                                                       data-target="scmRepositories">
                                                    <thead>
                                                    <tr>
                                                        <th id="inputActionType">操作类型</th>
                                                        <th id="serverId">服务器地址</th>
                                                        <th data-ingore="true">请选择模板</th>
                                                        <th id="repoType">服务器类型</th>
                                                        <th id="repoId" style="display:none">repoId</th>
                                                        <th id="templateId" style="display:none">templateId</th>
                                                        <th id="repoName">名称</th>
                                                        <th id="repoRemoteId" style="display:none">repoRemoteId</th>
                                                        <th id="repoStyle" style="display:none">repoStyle</th>
                                                        <th data-ingore="true">操作</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list-item_copy">
                                                    <tr data-ingore-target="repoName">
                                                        <td>
                                                            <select class="form-control actionSvns" id="inputActionType"
                                                                    name="inputActionType">
                                                                <option value="-1">------请选择------</option>
                                                                <option th:each="optype : ${inputActionTypes}"
                                                                        th:value="${optype.key}"
                                                                        th:text="${optype.value}"
                                                                        th:remove="${#strings.equalsIgnoreCase(optype.key, 'UPDATE_OR_NOTHING')}? all"
                                                                />
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" id="serverId" name="serverId">
                                                                <option th:each="ip : ${serverIPs}"
                                                                        th:value="${ip.serverId}"
                                                                        th:text="${ip.outerServerIpAndPort}"
                                                                        th:remove="${#strings.equalsIgnoreCase(ip.serverType, 'SVN')}? none:all"
                                                                />
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control selectSvns" id="selectSvns"
                                                                    name="selectSvns" data-ingore="true">
                                                                <option value="-1">------请选择------</option>
                                                                <option th:each="svn : ${existSvns}"
                                                                        th:value="${svn.repoName}"
                                                                        th:text="${svn.repoName}"/>
                                                            </select>
                                                            <select class="form-control selectSvnTemplats"
                                                                    id="selectSvnTemplats" name="selectSvnTemplats"
                                                                    data-ingore="true" style="display:none">
                                                                <option value="-1">------请选择------</option>
                                                                <option th:each="svn : ${svnTemplates}"
                                                                        th:value="${svn.repoName}"
                                                                        th:text="${svn.repoName}"/>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control select" id="repoType"
                                                                    name="repoType" disabled>
                                                                <option th:each="type : ${repoTypes}"
                                                                        th:value="${type.key}"
                                                                        th:text="${type.value}"/>
                                                            </select>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="hidden"
                                                                   name="repoId" id="repoId" th:value="*{repoId}"/>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="hidden"
                                                                   name="templateId" id="templateId"
                                                                   th:value="*{templateId}"/>
                                                        </td>
                                                        <td>
                                                            <input class="form-control selectChange" type="text"
                                                                   name="repoName" id="repoName" disabled/>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="text"
                                                                   name="repoRemoteId" id="repoRemoteId" disabled/>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="repoStyle"
                                                                   name="repoStyle" id="repoStyle"/>
                                                        </td>
                                                        <td>
                                                            <a href="#" class="del">
                                                            <span class="glyphicon glyphicon-remove" aria-hidden="true"
                                                                  title="删除"></span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <div class="step-pane" data-step="6">
                                            <h3 class="lighter block green">填写下列信息</h3>

                                            <div class="row mar_ned">
                                                <table class="table table-bordered " id="jenkinsProjectTable"
                                                       data-target="jenkinsProjects">
                                                    <thead>
                                                    <tr>
                                                        <th id="inputActionType">请选择操作类型</th>
                                                        <th id="serverId">服务器</th>
                                                        <th data-ingore="true">请选择模板</th>
                                                        <th id="jenkinsProjectId" style="display:none">
                                                            jenkinsProjectId
                                                        </th>
                                                        <th id="referProj" style="display:none">referProj</th>
                                                        <th id="jenkinsProjKey">Jenkins Job英文简称</th>
                                                        <th data-ingore="true">操作</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list-item_copy">
                                                    <tr data-ingore-target="jenkinsProjKey">
                                                        <td>
                                                            <select class="form-control actionJenkins"
                                                                    id="inputActionType"
                                                                    name="inputActionType">
                                                                <option value="-1">------请选择------</option>
                                                                <option th:each="optype : ${inputActionTypes}"
                                                                        th:value="${optype.key}"
                                                                        th:text="${optype.value}"
                                                                        th:remove="${#strings.equalsIgnoreCase(optype.key, 'UPDATE_OR_NOTHING')}? all"
                                                                />
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" id="serverId" name="serverId">
                                                                <option th:each="ip : ${serverIPs}"
                                                                        th:value="${ip.serverId}"
                                                                        th:text="${ip.outerServerIpAndPort}"
                                                                        th:remove="${#strings.equalsIgnoreCase(ip.serverType, 'JENKINS')}? none:all"
                                                                />
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control selectJenkins" id="jenkin"
                                                                    name="jenkin" data-ingore="true">
                                                                <option value="-1">------请选择------</option>
                                                                <option th:each="jenkin : ${existJenkins}"
                                                                        th:value="${jenkin.jenkinsProjKey}"
                                                                        th:text="${jenkin.jenkinsProjKey}"/>
                                                            </select>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="hidden"
                                                                   name="jenkinsProjectId" id="jenkinsProjectId"/>
                                                        </td>
                                                        <td style="display:none">
                                                            <input class="form-control selectChange" type="hidden"
                                                                   name="referProj" id="referProj"/>
                                                        </td>
                                                        <td>
                                                            <input class="form-control selectChange" type="text"
                                                                   name="jenkinsProjKey" id="jenkinsProjKey" disabled/>
                                                        </td>
                                                        <td>
                                                            <a href="#" class="del">
                                                            <span class="glyphicon glyphicon-remove" aria-hidden="true"
                                                                  title="删除"></span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <div class="step-pane" data-step="7">
                                            <h3 class="lighter block green">填写下列信息</h3>

                                            <div class="row mar_ned">
                                                <table class="table table-bordered " id="artifactsTable"
                                                       data-target="artifacts">
                                                    <thead>
                                                    <tr>
                                                        <th id="artifactId" style="display:none">artifactId</th>
                                                        <th id="serverId">服务器地址</th>
                                                        <th id="artifactType">类型</th>
                                                        <th id="rootPath">内容</th>
                                                        <th data-ingore="true">操作</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="list-item_copy">
                                                    <tr data-ingore-target="rootPath">
                                                        <td style="display:none">
                                                            <input class="form-control" type="hidden" name="artifactId"
                                                                   id="artifactId" th:value="*{artifactId}"/>
                                                        </td>
                                                        <td>
                                                            <select class="form-control" id="serverId" name="serverId">
                                                                <option th:each="ip : ${serverIPs}"
                                                                        th:value="${ip.serverId}"
                                                                        th:text="${ip.outerServerIpAndPort}"
                                                                        th:remove="${#strings.equalsIgnoreCase(ip.serverType, 'ARTIFACT')}? none:all"/>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <select class="form-control select" id="artifactType"
                                                                    name="artifactType">
                                                                <option th:each="type : ${aritifactTypes}"
                                                                        th:value="${type.key}" th:text="${type.value}"/>
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <input class="form-control" type="text" name="rootPath"
                                                                   id="rootPath"/>
                                                        </td>
                                                        <td>
                                                            <a href="#" class="del">
                                                            <span class="glyphicon glyphicon-remove" aria-hidden="true"
                                                                  title="删除"></span>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <hr>
                                <div class="wizard-actions">
                                    <button class="btn btn-prev" disabled="disabled">
                                        <i class="ace-icon fa fa-arrow-left"></i>
                                        上一步
                                    </button>

                                    <button class="btn btn-success btn-next" data-last="完成">
                                        下一步
                                        <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                                    </button>
                                </div>
                            </div><!-- /.widget-main -->
                        </div><!-- /.widget-body -->
                    </div>

                </div><!-- /.col -->
            </div><!-- /.row -->
        </form>
    </section>
</div><!-- /.main-container -->
</body>

<footer th:include="section/footer :: footer"></footer>

<script th:src="@{/js/common/objectUtil.js}"></script>
<script th:src="@{/js/common/table2json.js}"></script>
<script th:src="@{/js/project/common.js}"></script>

<script type="text/javascript">
    jQuery(function ($) {
        $("input[type=text],select,textarea,input[type=number]").focusin(function () {
            $("#" + $(this).attr("id") + "_tips").css({"display":"block"});
        }).focusout(function () {
            $("#" + $(this).attr("id") + "_tips").css({"display":"none"});
        });

        $('[data-rel=tooltip]').tooltip();

        $('.select2').css('width', '200px').select2({allowClear: true})
            .on('change', function () {
                $(this).closest('form').validate().element($(this));
            });


        var $validation = false;
        $('#fuelux-wizard-container')
            .ace_wizard({
                //step: 2 //optional argument. wizard will jump to step "2" at first
                //buttons: '.wizard-actions:eq(0)'
            })
            .on('actionclicked.fu.wizard', function (e, info) {
                if (info.step == 1 && $validation) {
                    if (!$('#validation-form').valid()) e.preventDefault();
                }
            })
            //.on('changed.fu.wizard', function() {
            //})
            .on('finished.fu.wizard', function (e) {
                bootbox.dialog({
                    message: "Thank you! Your information was successfully saved!",
                    buttons: {
                        "success": {
                            "label": "OK",
                            "className": "btn-sm btn-primary"
                        }
                    }
                });
            }).on('stepclick.fu.wizard', function (e) {
            //e.preventDefault();//this will prevent clicking and selecting steps
        });

        $.mask.definitions['~'] = '[+-]';
        $('#phone').mask('(999) 999-9999');

        jQuery.validator.addMethod("phone", function (value, element) {
            return this.optional(element) || /^\(\d{3}\) \d{3}\-\d{4}( x\d{1,6})?$/.test(value);
        }, "Enter a valid phone number.");

        $('#validation-form').validate({
            errorElement: 'div',
            errorClass: 'help-block',
            focusInvalid: false,
            ignore: "",
            rules: {
                email: {
                    required: true,
                    email: true
                },
                password: {
                    required: true,
                    minlength: 5
                },
                password2: {
                    required: true,
                    minlength: 5,
                    equalTo: "#password"
                },
                name: {
                    required: true
                },
                phone: {
                    required: true,
                    phone: 'required'
                },
                url: {
                    required: true,
                    url: true
                },
                comment: {
                    required: true
                },
                state: {
                    required: true
                },
                platform: {
                    required: true
                },
                subscription: {
                    required: true
                },
                gender: {
                    required: true,
                },
                agree: {
                    required: true,
                }
            },

            messages: {
                email: {
                    required: "Please provide a valid email.",
                    email: "Please provide a valid email."
                },
                password: {
                    required: "Please specify a password.",
                    minlength: "Please specify a secure password."
                },
                state: "Please choose state",
                subscription: "Please choose at least one option",
                gender: "Please choose gender",
                agree: "Please accept our policy"
            },


            highlight: function (e) {
                $(e).closest('.form-group').removeClass('has-info').addClass('has-error');
            },

            success: function (e) {
                $(e).closest('.form-group').removeClass('has-error');//.addClass('has-info');
                $(e).remove();
            },

            errorPlacement: function (error, element) {
                if (element.is('input[type=checkbox]') || element.is('input[type=radio]')) {
                    var controls = element.closest('div[class*="col-"]');
                    if (controls.find(':checkbox,:radio').length > 1) controls.append(error);
                    else error.insertAfter(element.nextAll('.lbl:eq(0)').eq(0));
                }
                else if (element.is('.select2')) {
                    error.insertAfter(element.siblings('[class*="select2-container"]:eq(0)'));
                }
                else if (element.is('.chosen-select')) {
                    error.insertAfter(element.siblings('[class*="chosen-container"]:eq(0)'));
                }
                else error.insertAfter(element.parent());
            },

            submitHandler: function (form) {
            },
            invalidHandler: function (form) {
            }
        });

        $('#modal-wizard-container').ace_wizard();
        $('#modal-wizard .wizard-actions .btn[data-dismiss=modal]').removeAttr('disabled');

        /**
         $('#date').datepicker({autoclose:true}).on('changeDate', function(ev) {
					$(this).closest('form').validate().element($(this));
				});

         $('#mychosen').chosen().on('change', function(ev) {
					$(this).closest('form').validate().element($(this));
				});
         */

        $(document).one('ajaxloadstart.page', function (e) {
            //in ajax mode, remove remaining elements before leaving page
            $('[class*=select2]').remove();
        });
    })
</script>

<script th:inline="javascript">
    /*<![CDATA[*/

    $(document).on("change", ".actionJira", function () {
        var action = $(this).children('option:selected').val();
        jQuery("#selectJira").get(0).options[0].selected = true;
        jQuery("#teamleader").val(teamleader);
        if (action == "REMOTE_CREATE") { //导入
            jQuery("#jiraProjectKey").val($("#projectKey").val());
            jQuery("#jiraProjectName").val($("#projectName").val());
        } else if (action == "-1") {
            jQuery("#jiraStep").find(".selectChange").each(function () {
                jQuery(this).val('');
            });
        } else { //创建
            jQuery("#jiraStep").find(".selectChange").each(function () {
                jQuery(this).val('');
            });
        }
    });
    $(document).on("change", ".selectJira", function () {
        var index = $(this).children('option:selected').index();
        var value = $(this).children('option:selected').val();
        index--;
        var action = jQuery("#jiraStep").find(".actionJira").children('option:selected').val();
        jQuery("#jiraStep").find("#referJiraId").val(value);
        debugger;

        var oo = /*[[${existJiras}]]*/ null;
        var jira = oo[index];
        if (!isEmpty(jira)) {
            if ("ATTACH_OLD" == action) {
                jQuery("#jiraStep").find("input,textarea").each(function () {
                    jQuery(this).val(jira[this.id]);
                });
            }
        } else {
            jQuery("#jiraStep").find(".selectChange").each(function () {
                jQuery(this).val('');
            });
        }
    });

    $(document).on("change", ".actionConfluence", function () {
        var action = jQuery(this).children('option:selected').val();
        var parentTr = jQuery(this).parent().parent();
        parentTr.find(".selectConfluence").get(0).options[0].selected = true;

        if (action == "REMOTE_CREATE") { //创建
            parentTr.find("input,textarea").each(function () {
                jQuery(this).val('');
                jQuery(this).attr("disabled", false);
            });
            parentTr.find(".selectConfluence").attr("disabled", true);
            parentTr.find("#spaceKey").val($("#projectKey").val());
            parentTr.find("#spaceName").val($("#projectName").val());
        } else if (action == "-1") {
            parentTr.find(".selectConfluence").attr("disabled", false);
            parentTr.find(".selectChange").each(function () {
                jQuery(this).val('');
                jQuery(this).attr("disabled", true);
            });
        } else { //导入
            parentTr.find(".selectConfluence").attr("disabled", false);
            parentTr.find(".selectChange").each(function () {
                jQuery(this).val('');
                jQuery(this).attr("disabled", true);
            });
        }
    });

    $(document).on("change", ".selectConfluence", function () {
        var index = jQuery(this).children('option:selected').index();
        index--;
        var parentTr = $(this).parent().parent();
        var action = parentTr.find(".actionConfluence").children('option:selected').val();
        var oo = /*[[${existConfs}]]*/ null;
        var conf = oo[index];
        if (!isEmpty(conf)) {
            if ("ATTACH_OLD" == action) {
                parentTr.find(".selectChange").each(function () {
                    jQuery(this).val(conf[this.id]);
                });
            }
        } else {
            parentTr.find(".selectChange").each(function () {
                jQuery(this).val('');
            });
        }

    });

    $(document).on("change", ".actionSvns", function () {
        var index = jQuery(this).children('option:selected').index();
        var action = jQuery(this).children('option:selected').val();
        var parentTr = jQuery(this).parent().parent();

        if (action == "REMOTE_CREATE") {
            parentTr.find(".selectSvns").hide();
            parentTr.find(".selectSvnTemplats").show();
            parentTr.find(".selectSvns").get(0).options[0].selected = true;
            parentTr.find(".selectSvnTemplats").get(0).options[0].selected = true;
            parentTr.find(".selectChange").each(function () {
                jQuery(this).val('');
                jQuery(this).attr("disabled", false);
            });
        } else {
            parentTr.find(".selectSvns").show();
            parentTr.find(".selectSvnTemplats").hide();
            parentTr.find(".selectSvns").get(0).options[0].selected = true;
            parentTr.find(".selectSvnTemplats").get(0).options[0].selected = true;
            parentTr.find(".selectChange").each(function () {
                jQuery(this).val('');
                jQuery(this).attr("disabled", true);
            });
        }
    });

    $(document).on("change", ".selectSvns", function () {
        var index = $(this).children('option:selected').index();
        index--;
        var parentTr = $(this).parent().parent();
        var oo = /*[[${existSvns}]]*/ null;
        var svn = oo[index];
        parentTr.find(".selectChange").each(function () {
            $(this).val(svn[this.id]);
        });
    });

    $(document).on("change", ".selectSvnTemplats", function () {
        var index = $(this).children('option:selected').index();
        index--;
        var parentTr = $(this).parent().parent();
        var oo = /*[[${svnTemplates}]]*/ null;
        var svn = oo[index];
        parentTr.find(".selectChange").each(function () {
            $(this).val(svn[this.id]);
        });
        parentTr.find("#repoName").val('');
    });

    $(document).on("change", ".actionJenkins", function () {
        var index = jQuery(this).children('option:selected').index();
        var action = jQuery(this).children('option:selected').val();
        var parentTr = jQuery(this).parent().parent();

        if (action == "REMOTE_CREATE") {
            parentTr.find(".selectJenkins").get(0).options[0].selected = true;
            parentTr.find(".selectChange").each(function () {
                jQuery(this).val('');
                jQuery(this).attr("disabled", false);
            });
        } else {
            parentTr.find(".selectJenkins").get(0).options[0].selected = true;
            parentTr.find(".selectChange").each(function () {
                jQuery(this).val('');
                jQuery(this).attr("disabled", true);
            });
        }
    });

    $(document).on("change", ".selectJenkins", function () {
        var index = $(this).children('option:selected').index();
        index--;
        var parentTr = $(this).parent().parent();
        var oo = /*[[${existJenkins}]]*/ null;
        var jenkin = oo[index];
        parentTr.find("input,textarea").each(function () {
            $(this).val(jenkin[this.id]);
        });
    });

    /*]]>*/
</script>

</html>