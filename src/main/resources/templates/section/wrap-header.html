<header class="main-header" th:fragment="wrap-header">
    <!-- Logo -->
    <a href="#" class="logo" style="padding-left: 0px; padding-right: 0px;">
    <span class="logo-mini">
      <img th:src="@{/img/logo36.png}">
    </span>
        <span class="logo-lg">
      <img th:src="@{/img/logo.png}"></span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
        <!-- Sidebar toggle button-->
        <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
            <span class="sr-only">Toggle navigation</span>
        </a>

        <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
                <li role="presentation" class="dropdown">
                    <a th:href="${PORTAL_SERVER.loginUrl}" style="padding-left: 10px;padding-right: 10px"
                       data-url-top="true">全生命周期管理</a>
                </li>

                <li role="presentation" th:if="${#lists.size(servers['JIRA']) == 1}">
                    <a th:each="server : ${servers['JIRA']}" th:object="${server}" th:href="|*{protocol}://*{domain}|"
                        style="padding-left: 10px;padding-right: 10px">任务跟踪</a>
                </li>
                <li role="presentation" class="dropdown" th:if="${#lists.size(servers['JIRA']) > 1}">
                    <a class="dropdown-toggle" data-toggle="dropdown" style="padding-left: 10px;padding-right: 10px">任务跟踪<span
                            class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li th:each="server : ${servers['JIRA']}" th:object="${server}">
                            <a th:href="|*{protocol}://*{domain}|" th:text="*{domain}"></a>
                        </li>
                    </ul>
                </li>

                <li role="presentation" th:if="${#lists.size(servers['CONFLUENCE']) == 1}">
                    <a th:each="server : ${servers['CONFLUENCE']}" th:object="${server}" th:href="|*{protocol}://*{domain}|"
                        style="padding-left: 10px;padding-right: 10px">文档协同</a>
                </li>
                <li role="presentation" class="dropdown" th:if="${#lists.size(servers['CONFLUENCE']) > 1}">
                    <a class="dropdown-toggle" data-toggle="dropdown" style="padding-left: 10px;padding-right: 10px">文档协同<span
                            class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li th:each="server : ${servers['CONFLUENCE']}" th:object="${server}">
                            <a th:href="|*{protocol}://*{domain}|" th:text="*{domain}"></a>
                        </li>
                    </ul>
                </li>

                <li role="presentation">
                    <a th:href="${TESTLINK_SERVER.loginUrl}" style="padding-left: 10px;padding-right: 10px">测试管理</a>
                </li>

                <li role="presentation" th:if="${#lists.size(servers['JENKINS']) == 1}">
                    <a th:each="server : ${servers['JENKINS']}" th:object="${server}" th:href="|*{protocol}://*{domain}|"
                        style="padding-left: 10px;padding-right: 10px">持续集成</a>
                </li>
                <li role="presentation" class="dropdown" th:if="${#lists.size(servers['JENKINS']) > 1}">
                    <a class="dropdown-toggle" data-toggle="dropdown" style="padding-left: 10px;padding-right: 10px">持续集成<span
                            class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li th:each="server : ${servers['JENKINS']}" th:object="${server}">
                            <a th:href="|*{protocol}://*{domain}|" th:text="*{domain}"></a>
                        </li>
                    </ul>
                </li>

                <li role="presentation" th:if="${#lists.size(servers['ARTIFACT']) == 1}">
                    <a th:each="server : ${servers['ARTIFACT']}" th:object="${server}" th:onclick="|window.open('*{protocol}://*{domain}')|"
                        style="padding-left: 10px;padding-right: 10px">软件仓库</a>
                </li>
                <li role="presentation" class="dropdown" th:if="${#lists.size(servers['ARTIFACT']) > 1}">
                    <a class="dropdown-toggle" data-toggle="dropdown" style="padding-left: 10px;padding-right: 10px">软件仓库<span
                            class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li th:each="server : ${servers['ARTIFACT']}" th:object="${server}">
                            <a th:onclick="|window.open('*{protocol}://*{domain}')|" th:text="*{domain}"></a>
                        </li>
                    </ul>
                </li>

                <li role="presentation" th:if="${(#lists.size(servers['SVN']) + #lists.size(servers['GIT'])) == 1}">
                    <a th:each="server : ${servers['SVN']}" th:object="${server}" th:href="|*{protocol}://*{domain}|"
                       style="padding-left: 10px;padding-right: 10px" th:if="${#lists.size(servers['SVN']) > 0}">代码管理</a>
                    <a th:each="server : ${servers['GIT']}" th:object="${server}" th:onclick="|window.open('*{protocol}://*{domain}')|"
                       style="padding-left: 10px;padding-right: 10px" th:if="${#lists.size(servers['GIT']) > 0}">代码管理</a>
                </li>
                <li role="presentation" class="dropdown" th:if="${(#lists.size(servers['SVN']) + #lists.size(servers['GIT'])) > 1}">
                    <a class="dropdown-toggle" data-toggle="dropdown" style="padding-left: 10px;padding-right: 10px">代码管理<span
                            class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li th:each="server : ${servers['SVN']}" th:object="${server}">
                            <a th:href="|*{protocol}://*{domain}|" th:text="*{domain}"></a>
                        </li>
                        <li th:each="server : ${servers['GIT']}" th:object="${server}">
                            <a th:onclick="|window.open('*{protocol}://*{domain}')|" th:text="*{domain}"></a>
                        </li>
                    </ul>
                </li>

                <li role="presentation">
                    <a th:onclick="'javascript:window.open(\''+${SONAR_SERVER.urlContext}+'\');'"
                       style="padding-left: 10px;padding-right: 10px">静态分析</a>
                </li>
                <li role="presentation">
                    <a href="http://10.214.178.66/zabbix/" style="padding-left: 10px;padding-right: 10px">监控管理</a>
                </li>
                <li role="presentation">
                    <a href="http://10.214.169.130/itopzh2/web/pages/UI.php"
                       style="padding-left: 10px;padding-right: 10px">运维管理</a>
                </li>


                <li role="presentation" class="dropdown user user-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-prevent-click="false">
                        <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
                        <span class="hidden-xs" th:text="${currentUser.username}"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <!-- User image -->
                        <li class="user-header">
                            <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                            <p>
                                Web Developer
                                <small>Member since Nov. 2012</small>
                            </p>
                        </li>
                        <!-- Menu Footer-->
                        <li class="user-footer">
                            <div class="pull-right">
                                <a th:href="@{/logout}" class="btn btn-default btn-flat">Sign out</a>
                            </div>
                        </li>
                    </ul>
                </li>
                <!-- Control Sidebar Toggle Button -->
                <li role="presentation">
                    <a href="#" data-toggle="control-sidebar" data-prevent-click="false">
                        <i class="fa fa-gears"></i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <script type="text/javascript">
        $('.navbar-nav').on('click', function (event) {
            event.preventDefault();
            var target = $(event.target);
            var targetUrl = target[0].href;
            //var pathname=target[0].pathname||"";
            var targetClass = target[0].className;
            var preventClick = target.data("preventClick");
            var isTop = target.data("urlTop");
            target.parent().siblings().removeClass('active');
            target.parent().addClass('active');

            if (typeof (targetUrl) != "undefined" && targetUrl != null) {
                debugger;
                if (isTop === true) {
                    $("#loading", parent.document.body).show();
                    $("body").removeClass("sidebar-collapse");
                    top.location.href = targetUrl;
                } else if (targetClass.indexOf("dropdown") != -1 || preventClick === false) {
                    //不跳转
                } else {
                    $("#loading", parent.document.body).show();
                    $("body").addClass("sidebar-collapse");
                    $("#mainframe", parent.document.body).attr("src", targetUrl);
                }
            }
        });
    </script>
</header>